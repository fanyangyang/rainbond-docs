---
title: 应用分享与发布
description: 讲解Rainbond应用发布功能说明
Weight: 4006
---


针对对于交付和对外交付两种交付方式，Rainbond提供了两种不同的方案，[共享库](docs/user-manual/enterprise/appcenter/)和[云应用商店](http://market.goodrain.com/)。

#### 应用模型

Rainbond定义的应用模型完全面向应用交付，不同的版本信息对应不同的模型，交付时交付的是一个又一个独立的模型，可以针对不同的版本进行一键安装一键部署的快速交付。

应用模板和模型是一对多的关系，不同的模型之间信息独自保存，相互隔离，互不影响。

模型中可以包含1-N个服务组件和插件，以及服务组件和插件的资源及配置、拓扑关系等，且都分享于同一个应用中。

组件作为Rainbond可管理的最小服务单元，多个组件构成Rainbond定义的应用模型，组成一个又一个复杂的业务系统，可以对外提供服务，也可以分享给其他组织进行独立部署。精心制作完成各应用模型，并选择将该应用发布到[共享库](docs/user-manual/enterprise/appcenter/)或[云应用商店](http://market.goodrain.com/)，即可完成一键发布、一键安装的交付过程。

分享发布后的应用可供团队、公司甚至是云应用商店的其他用户一键安装部署完整的服务体系。分享到不同的范围，可见性也有所不同，具体可见范围如下：

1. 分享到共享库

根据分享时所选择的模板决定应用的可见范围，从而对分享的应用进行隔离，对不同成员的安装使用进行限制。

* 企业应用模板在当前企业下的所有成员可见
    
* 团队应用模板在所属团队下的所有成员可见

> 企业管理员没有团队限制，不同团队的应用模型均可见

2. 分享到云应用商店

好雨公有云应用商店的所有企业及用户可见

> 默认应用发布类型为公有应用，在发布到应用商店时可根据需要进行相应的调整


以下对应用发布与分享的描述为分享到共享库的流程，分享到云应用市场的流程与其相同，这里不再赘述。


共享库作为企业的内部应用市场，对上可对接云应用商店，同步应用商店的应用，对下可以托管用户分享的应用，不同的团队之间的应用模型相互独立互不影响。应用的所有版本都完整的记录在共享库中，可以直接安装使用。


需要注意的是，开源版本中，共享库中的应用并不支持跨数据中心交付，如果有跨数据中心进行交付的需求，欢迎了解[Rainbond企业版](https://www.goodrain.com/)和[Rainbond Cloud版](https://cloud.goodrain.com/enterprise-server/registered)。



#### 发布记录管理

应用发布管理页面中，提供发布中和发布完成的任务记录，详细的描述了每次发布记录所使用的模板，设置的版本号和版本别名、发布范围、发布时间和发布状态。也可以方便的对未完成的任务进行进行发布区或取消发布操作。


#### 应用发布流程

Rainbond定义的发布流程拥有完整的生命周期，一经开始则会形成独立的分享记录。每个发布流程相互独立不影响。

应用分享发布的过程就是将应用中所有组件进行打包统一放置的一个过程，期间会经历发布范围的选择、组件配置的修改，组件的镜像化和推送镜像几个步骤。

Rainbond是依托于kubernetes的应用管理平台，所有运行与Rainbond的应用组件都会先翻译成一个个的镜像在运行到kubernetes集群中。应用的分享发布结合实际情况，将组件的镜像进行收集，统一推送到镜像仓库中。下载使用时直接使用完整的镜像可以最快的将应用启动，以此替代源码构建的过程。

###### 确定发布范围

开始分享之前可以选择是分享到共享库或云应用商店，从而修改修改应用模型步骤。

分享到共享库时，根据选择的应用模板确定分享到企业或者当前团队，默认选择第一条应用模板，也可以新建应用模板，确定分享范围（企业或当前团队）。

分享到云应用商店时，可以使用云应用商店已经发布过的应用模板，或者新建应用模板。

##### 应用版本号和版本别名

应用的发布对应着要发布的版本，Rainbond定义的应用模型版本号支持`x.x`,`x.x.x`两种格式，且只允许数字，不允许字母其其他符号。

版本别名允许字母数字及其他字符，可作为快速查询版本的标识。(长度限制32位)

> 对于旧版本的数据仍可展示使用，但旧版本的应用模板可以继续发布使用。

##### 组件模型配置

应用下的所有组件都可以在提交应用模型之前修改其环境变量、伸缩规则和连接信息，甚至选择性的分享应用下的部分组件。

- 连接信息

连接信息是一种特殊的环境变量，用在组件依赖关系中，可实现组件间环境变量保持一致。

一般用在组件依赖数据库组件的场景中，数据库组件创建带有账户密码的连接信息供其他组件直接使用。

在分享的过程中，Rainbond针对连接信息提供`生成随机值`的功能，可以避免分享出去的应用，数据库账户密码类的信息仍相同的问题。


- 环境变量

环境变量默认可修改，也可以设置成不可修改，防止其他用户安装后随意修改环境变量造成的组件服务不可用。

- 伸缩规则

根据[组件类型](/docs/user-manual/app-service-manage/basic-operation/service-properties/)的不同。组件的伸缩规则的节点数会有默认的配置。比如有状态单实例组件，其最小节点数和最大节点数都只能为1。

最小内存则等于组件当前所使用的内存，可在此基础上向上调整，但不可设定的比当前所使用的内存更小。


##### 插件模型信息

应用模型中包含的插件模型信息包含应用下所有组件所使用的插件集合。

应用分享的同时会分享插件信息，其他用户在安装时会将插件一并安装到新的环境中直接使用。

##### 提交应用模型

应用模型以及各组件的配置修改完成后可提交分享任务，发起同步任务，开始准备各组件的镜像资源。

此时会根据是分享到共享库或是云应用市场，将应用下所有组件和插件的镜像推送到不同的镜像仓库中。

##### 确认分享

确认分享是对该次分享任务的一个总结，确定分享任务正常结束，分享流程完成，记录状态发生变更，此时会退出分享流程，并且可以在共享库中查看到该应用模型。

> 如果分享到云应用商店，此时页面会跳转到云应用商店的应用模型详情页面，可以针对该应用模型进行更多的参数设置，如将设置应用发布类型为私有应用。

##### 取消分享

取消分享也是对该次分享的一个总结，取消后，该次分享记录会被删除，不再出现在应用发布记录中。

#### 模型的管理

发布成功后，应用模型会出现在共享库列表中，此时仍可以对模型的名称、发布范围进行修改，对其设定标签、添加描述、修改其logo。也可以决定该应用模板是否release而更改其release的状态，确定其是否处于一个开发的状态中。

在共享库的应用模板中，可以看到模板的多个版本记录，在安装的过程中可以使用不同的版本进行安装。




